<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<meta http-equiv="Access-Control-Allow-Origin" content="*">
    <title>聊天室Demo</title>
</head>
<body>

</body>
<script src="http://concat.lietou-static.com/core/pc/js/common/jquery-1.7.1.min.js"></script>
<script src="NIM_Web_NIM_v4.5.0.js"></script>
<script src="NIM_Web_Chatroom_v4.5.0.js"></script>
<script type="text/javascript">
	var nim = NIM.getInstance({
	debug:true,
		appKey: '0b4ad5bf42cf98254940d326bfa5aa0e',
		account: 'hr_8047914',
		token: '6eb33f755d4464000edbd03f1ea6a87e'
	});
	var address = "";
	nim.getChatroomAddress({
		chatroomId: '19431861',
		done: getChatroomAddressDone
	});
	function getChatroomAddressDone(error, obj) {
		console.log('获取聊天室地址' + (!error?'成功':'失败'), error, obj);
		if(!error){
			address = obj;
			console.log(address);
		}
	}
	
	/*var chatroom = Chatroom.getInstance({
		debug:true,
		appKey: '0b4ad5bf42cf98254940d326bfa5aa0e',
		account: 'hr_8047914',
		token: '6eb33f755d4464000edbd03f1ea6a87e',
		chatroomId: '19431861',
		chatroomAddresses: ["weblink05.netease.im:443","weblink06.netease.im:443"],//,address
		onconnect: onChatroomConnect,
		onerror: onChatroomError,
		onwillreconnect: onChatroomWillReconnect,
		ondisconnect: onChatroomDisconnect,
		// 消息
		onmsgs: onChatroomMsgs
	});
	function onChatroomConnect(chatroom) {
		console.log('进入聊天室', chatroom);
	}
	function onChatroomWillReconnect(obj) {
		// 此时说明 `SDK` 已经断开连接, 请开发者在界面上提示用户连接已断开, 而且正在重新建立连接
		console.log('即将重连', obj);
	}
	function onChatroomDisconnect(error) {
		// 此时说明 `SDK` 处于断开状态, 开发者此时应该根据错误码提示相应的错误信息, 并且跳转到登录页面
		console.log('连接断开', error);
		if (error) {
			switch (error.code) {
			// 账号或者密码错误, 请跳转到登录页面并提示错误
			case 302:
				break;
			// 被踢, 请提示错误后跳转到登录页面
			case 'kicked':
				break;
			default:
				break;
			}
		}
	}
	function onChatroomError(error, obj) {
		console.log('发生错误', error, obj);
	}
	function onChatroomMsgs(msgs) {
		console.log('收到聊天室消息', msgs);
	}*/
	
	//
</script>
</html>
